"use strict";(self.webpackChunkreact_admin_upgrade=self.webpackChunkreact_admin_upgrade||[]).push([[1295],{21295:function(n,e,t){t.r(e),t.d(e,{ApiAdminHome:function(){return Y},ApiGenerateField:function(){return D},ApiShow:function(){return R},ApiURL:function(){return W},ApiUserPasswordTab:function(){return v},CustomTab:function(){return K},CustomerLabel:function(){return z},DBConnection:function(){return B},EmployeeLabel:function(){return J},MyComp:function(){return E},SampleColumnField:function(){return H},UserPasswordField:function(){return G},UserPasswordTab:function(){return Z}});var i=t(1288),r=t(38302),a=t(28437),s=t(35614),o=t(25748),l=t(80184),c=t(29439),d=t(72791),u=t(26513),h=t(50228),x=t(59911),m=t(81898),p=t(73566),g=t(60195),j=t(15296),f=t(47609),Z=function(){var n=(0,j.QZ)(),e=(0,f.d)(),t=(0,o.j)(),a=((0,p.x)(),(0,d.useState)("")),s=(0,c.Z)(a,2),Z=s[0],v=s[1],b=(0,d.useState)(""),w=(0,c.Z)(b,2),y=w[0],C=w[1],S=(0,d.useState)(""),P=(0,c.Z)(S,2),_=P[0],N=P[1];return(0,l.jsx)(h.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(r.Z,{variant:"body2",component:"p",children:(0,l.jsx)("b",{children:"Change the user password"})})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(x.Z,{id:"outlined-password-input",label:"New Password",type:"password",onChange:function(n){var e=n.target.value;v(e),N(e===y&&e.length>5?"primary":""),console.log(e,y)}})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(x.Z,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:function(n){var e=n.target.value;C(e),N(Z===e&&Z.length>5?"primary":""),console.log(Z,e)}})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(u.Z,{variant:"contained",color:_,onClick:function(){if(console.log(y),Z===y)if(Z.length<6)e("Password too short",{type:"warning"});else{var i={password:Z};(0,g.t)("".concat(n.api_root,"/Users/").concat(t.id,"/change_password"),{method:"POST",body:JSON.stringify(i)}).then((function(){return e("Password Changed!")})).catch((function(){return e("Error Changing Password",{type:"warning"})}))}else e("Passwords don't match",{type:"warning"})},children:"Submit"})})]})})},v=function(){var n=(0,j.QZ)(),e=(0,f.d)(),t=(0,o.j)(),a=((0,p.x)(),(0,d.useState)("")),s=(0,c.Z)(a,2),Z=(s[0],s[1]),v=(0,d.useState)(""),b=(0,c.Z)(v,2),w=b[0],y=b[1],C=(0,d.useState)(""),S=(0,c.Z)(C,2),P=S[0],_=S[1],N=(0,d.useState)(""),k=(0,c.Z)(N,2),A=k[0],F=k[1];return(0,l.jsx)(h.Z,{component:"form",sx:{"& .MuiTextField-root":{m:1,width:"25ch"}},noValidate:!0,autoComplete:"off",children:(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(r.Z,{variant:"body2",component:"p",children:(0,l.jsx)("b",{children:"Current user password"})})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(x.Z,{id:"outlined-password-input",label:"Current Password",type:"password",onChange:function(n){var e=n.target.value;Z(e),F(e===P&&e.length>5?"primary":"")}})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(r.Z,{variant:"body2",component:"p",children:(0,l.jsx)("b",{children:"New user password"})})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(x.Z,{id:"outlined-password-input",label:"New Password",type:"password",onChange:function(n){var e=n.target.value;y(e),F(e===P&&e.length>5?"primary":"")}})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(x.Z,{id:"outlined-password-input",label:"Repeat Password",type:"password",onChange:function(n){var e=n.target.value;_(e),F(w===e&&w.length>5?"primary":"")}})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(u.Z,{variant:"contained",color:A,onClick:function(){if(console.log(P),w===P)if(w.length<1)e("Password too short",{type:"warning"});else{var i={password:w};(0,g.t)("".concat(n.api_root,"/Users/").concat(t.id,"/change_password"),{method:"POST",body:JSON.stringify(i)}).then((function(){return e("Password Changed!")})).catch((function(){return e("Error Changing Password",{type:"warning"})}))}else e("Passwords don't match",{type:"warning"})},children:"Submit"})})]})})},b=t(1413),w=t(18631),y=t(41971),C=t(107),S=t(38596),P=t(51911),_=t(29387),N=t(18152),k=t(72228),A=t(85078),F=t(86321),T=t(97265),M=t(72900),O=t(50120),L={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"75%",bgcolor:"background.paper",border:"0px solid #000",boxShadow:24,p:4,textAlign:"left"},Q=(0,S.Z)({joined_field:{cursor:"pointer",color:"#3f51b5"},modalStyle:{position:"absolute",top:"10%",left:"10%",overflow:"scroll",height:"100%",fontWeight:"0.6em",display:"flex"},db_btn:{height:"80%",position:"relative",top:"50%","-webkit-transform":"translateY(-50%)","-ms-transform":"translateY(-50%)",transform:"translateY(-50%)"},db_grid:{"& .MuiTextField-root":{borderBottom:"4px solid white",paddingBottom:"1em",paddingRight:"1em"}},actions:{textAlign:"center","& button":{width:"99%"}},conn_str:{backgroundColor:"#ccc",fontFamily:"Consolas"}}),U=function(n,e,t){var i={method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("auth_token"))},body:JSON.stringify(e||{})},r=Object.assign(i,t||{});return fetch(n,r)},q=function(n){var e=(0,j.QZ)(),t=d.useState(!1),i=(0,c.Z)(t,2),a=i[0],s=i[1],o=d.useState(""),h=(0,c.Z)(o,2),x=h[0],m=h[1],p=d.useState(L),g=(0,c.Z)(p,2),f=g[0],Z=g[1],v=n.record,b=Q();return(0,l.jsxs)("span",{children:[(0,l.jsx)("span",{onClick:function(n){s(!0),n.stopPropagation()},className:b.joined_field,title:" Relationship",children:(0,l.jsx)(P.Z,{})}),(0,l.jsx)(w.Z,{className:b.modalStyle,open:a,onClose:function(n){n.stopPropagation(),s(!1)},onClick:function(n){return n.stopPropagation()},"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsxs)(y.Z,{sx:f,children:[(0,l.jsx)(r.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Create API"}),"Pressing the button will generate an API with the following properties:",(0,l.jsxs)("dl",{children:[(0,l.jsx)("dt",{children:"Name:"}),(0,l.jsx)("dd",{children:null===v||void 0===v?void 0:v.name}),(0,l.jsx)("dt",{children:"Database URL:"}),(0,l.jsx)("dd",{children:null===v||void 0===v?void 0:v.connection_string}),(0,l.jsx)("dt",{children:"Port:"}),(0,l.jsx)("dd",{children:null===v||void 0===v?void 0:v.port}),(0,l.jsx)("dt",{children:"Hostname:"}),(0,l.jsx)("dd",{children:null===v||void 0===v?void 0:v.hostname})]}),(0,l.jsxs)(u.Z,{variant:"outlined",onClick:function(){return function(n){var t="".concat(e.api_root,"/Apis/").concat(n.id,"/generate");m((0,l.jsx)(_.g,{})),f.top="90%",Z(f),U(t).then((function(n){return n.json()})).then((function(n){m((0,l.jsx)("pre",{children:n}))}))}(v)},children:[" Start ",(0,l.jsx)(P.Z,{})," "]}),(0,l.jsx)("hr",{}),x]})})]})},D=function(n){return"list"===n.mode?(0,l.jsx)(q,(0,b.Z)({},n)):(0,l.jsx)(l.Fragment,{})},R=function(n){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{children:"xxxx"}),n.show]})},I=function(n){var e=(0,A.cI)(),t=(0,o.j)(),a=t?t.connection_string:"",s=Q(),h=d.useState(!1),x=(0,c.Z)(h,2),p=x[0],g=x[1],f=d.useState(L),Z=(0,c.Z)(f,1)[0],v=d.useState(a),b=(0,c.Z)(v,2),S=b[0],P=b[1],k=d.useState("user"),q=(0,c.Z)(k,2),D=q[0],R=q[1],I=d.useState("pass"),B=(0,c.Z)(I,2),V=B[0],W=B[1],Y=d.useState("dbhost"),E=(0,c.Z)(Y,2),H=E[0],J=E[1],z=d.useState("dbname"),G=(0,c.Z)(z,2),K=G[0],X=G[1],$=d.useState("Other"),nn=(0,c.Z)($,2),en=nn[0],tn=nn[1],rn=d.useState(""),an=(0,c.Z)(rn,2),sn=an[0],on=an[1],ln=(0,j.QZ)(),cn=function(){var n="".concat(en,"://");return"Other"===en?n=S:n+="sqlite"===en?"/".concat(K):"".concat(D,":").concat(V,"@").concat(H,"/").concat(K),n};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5}),(0,l.jsx)(i.Z,{item:!0,xs:4,spacing:4,margin:5,children:(0,l.jsx)(N.o,{source:"connection_string",initialValue:cn(),helperText:"SQLAlchemy connection string syntax",fullWidth:!0})}),(0,l.jsx)(i.Z,{item:!0,xs:4,spacing:4,margin:5,children:(0,l.jsx)(u.Z,{variant:"outlined",onClick:function(){return g(!0)},color:"primary",size:"large",className:s.db_btn,children:"Configure Connection"})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5}),(0,l.jsx)(w.Z,{open:p,onClose:function(){return g(!1)},className:s.modalStyle,"aria-labelledby":"modal-modal-title","aria-describedby":"modal-modal-description",children:(0,l.jsx)(y.Z,{sx:Z,children:(0,l.jsxs)(i.Z,{container:!0,className:s.db_grid,children:[(0,l.jsxs)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:[(0,l.jsx)(r.Z,{id:"modal-modal-title",variant:"h6",component:"h2",children:"Database Configuration"}),(0,l.jsx)("hr",{})]}),(0,l.jsx)(i.Z,{item:!0,xs:6,spacing:4,margin:5,children:(0,l.jsxs)(m.Z,{children:[(0,l.jsx)(O.Z,{id:"demo-radio-buttons-group-label",children:"DB Dialect"}),(0,l.jsxs)(T.Z,{"aria-labelledby":"demo-radio-buttons-group-label",defaultValue:"Other",name:"radio-buttons-group",onChange:function(n){var e=n.target.value;tn(e),"sqlite"===e&&(R(""),W(""),J(""))},children:[(0,l.jsx)(M.Z,{value:"mysql+pymysql",control:(0,l.jsx)(F.Z,{}),label:"MySQL"}),(0,l.jsx)(M.Z,{value:"oracle",control:(0,l.jsx)(F.Z,{}),label:"Oracle"}),(0,l.jsx)(M.Z,{value:"postgresql",control:(0,l.jsx)(F.Z,{}),label:"Postgres"}),(0,l.jsx)(M.Z,{value:"sqlite",control:(0,l.jsx)(F.Z,{}),label:"SQLite"}),(0,l.jsx)(M.Z,{value:"mssql+pyodbc",control:(0,l.jsx)(F.Z,{}),label:"SQLServer"}),(0,l.jsx)(M.Z,{value:"Other",control:(0,l.jsx)(F.Z,{}),label:"Manual:"})]}),(0,l.jsx)(C.Z,{id:"outlined-basic",label:"Manual",variant:"outlined",defaultValue:a,onChange:function(n){return P(n.target.value)},helperText:"Manual connection string configuration"})]})}),(0,l.jsxs)(i.Z,{item:!0,xs:6,spacing:4,margin:5,children:[(0,l.jsx)(C.Z,{label:"Username",variant:"outlined",onChange:function(n){return R(n.target.value)},value:D}),(0,l.jsx)(C.Z,{label:"Password",variant:"outlined",onChange:function(n){return W(n.target.value)},value:V}),(0,l.jsx)(C.Z,{label:"Database host",variant:"outlined",onChange:function(n){return J(n.target.value)},value:H}),(0,l.jsx)(C.Z,{label:"Database name",variant:"outlined",onChange:function(n){return X(n.target.value)},value:K})]}),(0,l.jsx)(i.Z,{item:!0,xs:6,spacing:4,margin:5,children:(0,l.jsxs)(r.Z,{children:["Connection String: ",(0,l.jsx)("span",{className:s.conn_str,children:cn()})]})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,className:s.actions,children:(0,l.jsx)("hr",{})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5}),(0,l.jsx)(i.Z,{item:!0,xs:2,spacing:4,margin:5,className:s.actions,children:(0,l.jsx)(u.Z,{variant:"outlined",color:"primary",onClick:function(){return function(n){var e="".concat(ln.api_root,"/Apis/test_conn");U(e,{connection_string:n}).then((function(n){return n.json()})).then((function(n){on((0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{variant:"h6",component:"h2",children:"Result:"}),(0,l.jsx)("pre",{children:n})]}))})).catch((function(n){return alert()}))}(cn())},children:" Test Connection"})}),(0,l.jsx)(i.Z,{item:!0,xs:2,spacing:4,margin:5,className:s.actions,children:(0,l.jsx)(u.Z,{variant:"outlined",color:"primary",onClick:function(){g(!1),e.change("connection_string",cn())},children:"Save & Close"})}),(0,l.jsx)(i.Z,{item:!0,xs:2,spacing:4,margin:5,className:s.actions,children:(0,l.jsx)(u.Z,{variant:"outlined",color:"primary",onClick:function(){return function(){if(void 0===t.id){var n="you must first save the api";return alert(n),void on(n)}var e="".concat(ln.api_root,"/Apis/").concat(t.id,"/generate");on((0,l.jsx)(_.g,{})),Z.top="90%",U(e).then((function(n){return n.json()})).then((function(n){on((0,l.jsx)("pre",{children:n}))}))}()},disabled:!t.id,title:t.id?"":"you must first save the api",children:"Generate API"})}),(0,l.jsx)(i.Z,{item:!0,xs:2,spacing:4,margin:5,className:s.actions,children:(0,l.jsx)(u.Z,{variant:"outlined",color:"primary",onClick:function(){return g(!1)},children:"Close"})}),(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,className:s.logdata,children:sn})]})})})]})},B=function(n){var e=(0,o.j)(),t=e?e.connection_string:"";return"edit"!==n.mode&&"create"!==n.mode?(0,l.jsx)(r.Z,{children:t}):(0,l.jsx)(I,(0,b.Z)({},n))},V=function(n){var e="/".concat(n.name,"/api");return(0,l.jsx)(r.Z,{children:(0,l.jsx)("a",{href:e,children:e})})},W=function(n){var e=(0,o.j)();return e.id?V(e):null},Y=function(n){var e=(0,k.Y)("Apis",{pagination:{page:0,perPage:100}}).data,t=null===e||void 0===e?void 0:e.map((function(n){return(0,l.jsx)("li",{children:V(n)})}));return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.Z,{variant:"h6",component:"h2",children:" APIs"}),(0,l.jsx)(r.Z,{children:(0,l.jsx)("ul",{children:t})})]})},E=function(n){return(0,l.jsx)("div",{children:"HMMMM"})},H=function(n){var e=n.attribute;return(0,l.jsx)(a.n,{source:e.name,style:{color:"red"}},e.name)},J=function(n){var e,t,i=n.instance;return(0,l.jsxs)("div",{children:[" ",null===(e=i.attributes)||void 0===e?void 0:e.FirstName," ",null===(t=i.attributes)||void 0===t?void 0:t.LastName]})},z=function(n){var e,t,i=n.instance;return(0,l.jsxs)("div",{children:[" ",(0,l.jsx)("b",{children:null===(e=i.attributes)||void 0===e?void 0:e.CompanyName})," ",(0,l.jsx)("i",{children:null===(t=i.attributes)||void 0===t?void 0:t.ContactName})]})},G=function(n){return"list"===n.mode?(0,l.jsx)("span",{}):"edit"===n.mode?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(i.Z,{item:!0,xs:12,spacing:4,margin:5,children:(0,l.jsx)(r.Z,{variant:"h6",component:"h6",children:"Change Password"})}),(0,l.jsxs)(i.Z,{item:!0,xs:4,spacing:4,margin:5,children:[(0,l.jsx)(s.W,{source:"_password"})," "]}),(0,l.jsxs)(i.Z,{item:!0,xs:4,spacing:4,margin:5,children:[(0,l.jsx)(s.W,{source:"_password"})," "]}),(0,l.jsx)(i.Z,{item:!0,xs:4,spacing:4,margin:5})]}):(0,l.jsx)(l.Fragment,{})},K=function(n){(0,o.j)();return(0,l.jsx)("div",{children:"Some Text"})}}}]);
//# sourceMappingURL=1295.179239a3.chunk.js.map